<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weather App</title>
  <!--favicon-->
  <link rel="icon" href="C:\Users\admin\Desktop\Python_FAST_Api\weather_forcast\frontend\media\weather-app.png" type="image/x-icon" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: black;
    }
    #bg-image {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: -10;
    }
    .glass {
      backdrop-filter: blur(12px);
      background-color: rgba(255 255 255 / 0.15);
      border: 1px solid rgba(255 255 255 / 0.3);
      box-shadow: 0 4px 30px rgba(0 0 0 / 0.1);
      border-radius: 15px;
    }
    #app-container {
      position: relative;
      z-index: 10;
      max-width: 900px;
      margin: 2rem auto;
      padding: 2rem;
    }
    @media screen and (max-width: 640px) {
      #app-container {
        margin: 1rem;
        padding: 1rem;
      }
    }
  </style>
</head>
<body>

  <img id="bg-image" src="C:\Users\admin\Desktop\Python_FAST_Api\weather_forcast\frontend\media\earth-galaxy-elements-this-image-furnished-by-nasa.jpg" alt="Background" />

  <div id="app-container" class="glass p-8 space-y-6">
    <h1 class="text-4xl font-bold text-center mb-6">üå¶Ô∏è Weather Forecast</h1>

    <div class="flex flex-col sm:flex-row gap-3">
      <input
        type="text"
        id="cityInput"
        placeholder="Enter city"
        class="flex-grow p-3 rounded-md bg-white/20 border border-white/40 placeholder-black/70 text-black focus:outline-none focus:ring-2 focus:ring-blue-300"
      />
      <button
        onclick="getWeather()"
        class="bg-blue-600 hover:bg-blue-700 text-white rounded-md px-6 py-2 font-semibold"
      >
        Search
      </button>
    </div>

    <div id="loading" class="hidden text-center text-white font-semibold">Loading...</div>

    <div id="currentWeather" class="hidden p-6 glass space-y-2">
      <h2 id="cityName" class="text-3xl font-semibold"></h2>
      <p id="currentTemp" class="text-2xl"></p>
      <p id="currentCondition" class="text-xl"></p>
      <p id="currentDetails" class="text-md text-white/80"></p>
    </div>
  </div>

  <script>
    const apiBase = 'http://127.0.0.1:8000';

    async function getWeather() {
      const city = document.getElementById('cityInput').value.trim();
      const loading = document.getElementById('loading');
      const weatherBox = document.getElementById('currentWeather');

      if (!city) {
        alert('Please enter a city name');
        return;
      }

      loading.classList.remove('hidden');
      weatherBox.classList.add('hidden');

      try {
        const response = await fetch(`${apiBase}/weather?city=${encodeURIComponent(city)}`);
        if (!response.ok) throw new Error('Weather fetch failed');
        const weather = await response.json();
        console.log(weather)
        document.getElementById('cityName').textContent = weather.data.city || city;
        document.getElementById('currentTemp').textContent = `üå°Ô∏è ${weather.data.temperature} ¬∞C`;
        document.getElementById('currentCondition').textContent = `üå•Ô∏è ${weather.data.condition}`;
        document.getElementById('currentDetails').textContent =
          `üíß Humidity: ${weather.data.humidity}%, üå¨ Wind: ${weather.data.wind_speed} km/h`;

        weatherBox.classList.remove('hidden');
      } catch (error) {
        alert('Failed to fetch weather data. Please check the city name or try again later.');
        console.error(error);
      } finally {
        loading.classList.add('hidden');
      }
    }

    window.onload = () => {
      // Optionally, you can pre-load weather for a default city here
      // e.g. document.getElementById('cityInput').value = "New York"; getWeather();
    };
  </script>

</body>
</html>
